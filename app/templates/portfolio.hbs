<h2 id="title">Portfolio: {{name}}</h2>

<hr/>

<h3>Holdings</h3>

<table class="table-striped">
  <thead>
    <tr>
      <th>Holdings</th>
      <th>Current Weight</th>
      <th>Count</th>
      <th>Target Weight</th>
      <th>Value</th>
      <th>Total Cost</th>
      <th>Gain / Loss</th>
      <th>Purchase Date</th>
    </tr>
  </thead>
  <tbody>
    {{#each allocation in allocations}}
      {{render "allocationItem" allocation}}
    {{/each}}
    <tr>
      <td>
        <dl>
          <dt>Total</dt>
        </dl>
      </td>
      <td>{{format-percentage totalWeight}}</td>
      <td colspan=2></td>
      <td>{{format-currency totalValue}}</td>
      <td colspan=3></td>
    </tr>
  </tbody>
</table>

<hr/>

<h3>Open Lots</h3>

{{#if openLots}}
  <table class="table-striped">
    <thead>
      <tr>
        <th>Fund</th>
        <th>Date Acquired</th>
        <th>Quantity</th>
        <th>Share Cost</th>
        <th>Total Cost</th>
        <th>Market Value</th>
        <th>Gain / Loss</th>
        <th>Term</th>
      </tr>
    </thead>
    <tbody>
      {{#each lot in openLots}}
        <tr>
          <td>{{lot.symbol}}</td>
          <td>{{moment lot.dateAcquired 'YYYY-MM-DD'}}</td>
          <td>{{lot.quantity}}</td>
          <td>{{format-currency lot.shareCost}}</td>
          <td>{{format-currency lot.totalCost}}</td>
          <td>{{format-currency lot.marketValue}}</td>
          <td>
            <span {{bind-attr class="lot.isLoss:red:green"}}>
              {{format-currency lot.valueChange}}
            </span>
          </td>
          <td>
            {{#if lot.isShortTerm}}
              Short
            {{else}}
              Long
            {{/if}}
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
{{else}}
<p>No open lots.</p>
{{/if}}

<h3>Closed Lots</h3>

{{#if closedLots}}
  <table class="table-striped">
    <thead>
      <tr>
        <th>Fund</th>
        <th>Date Acquired</th>
        <th>Date Sold</th>
        <th>Quantity</th>
        <th>Share Cost</th>
        <th>Total Cost</th>
        <th>Proceeds</th>
        <th>Gain / Loss</th>
        <th>Term</th>
      </tr>
    </thead>
    <tbody>
      {{#each lot in closedLots}}
        <tr>
          <td>{{lot.fund.symbol}}</td>
          <td>{{moment lot.dateAcquired 'YYYY-MM-DD'}}</td>
          <td>{{moment lot.dateSold 'YYYY-MM-DD'}}</td>
          <td>{{lot.quantity}}</td>
          <td>{{format-currency lot.shareCost}}</td>
          <td>{{format-currency lot.totalCost}}</td>
          <td>{{format-currency lot.proceeds}}</td>
          <td>
            <span {{bind-attr class="lot.isLoss:red:green"}}>
              {{format-currency lot.valueChange}}
            </span>
          </td>
          <td>
            {{#if lot.isShortTerm}}
              Short
            {{else}}
              Long
            {{/if}}
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
{{else}}
<p>No closed lots recorded.</p>
{{/if}}
