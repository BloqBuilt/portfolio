<h2>New Portfolio</h2>
<p>Enter a name for your portfolio, then allocate percentages to the various asset classes.</p>

<form {{action "create" this on="submit"}}>
  <fieldset>
    <p>
      <label for="name">Name:</label>
      {{input id="name" value=name}}
    </p>

    <h3>Allocations:</h3>
    <hr/>

    <table class="table-borders">
      <thead>
        <tr>
          <th>Asset Class</th>
          <th>Target Weight</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {{#each allocation in allocations}}
          <tr>
            <td>
              {{#link-to 'asset_class' allocation.assetClass}}
                {{allocation.assetClass.name}}
              {{/link-to}}
            </td>
            <td>
              {{input value=allocation.weight type="number" min="0" max="100"}}
            </td>
            <td>
              <a class="button" href="#" {{action 'deleteRecord' target=allocation}}>x</a>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>

    <p>
      {{view "select"
             content=remainingAssetClasses
             optionValuePath="content"
             optionLabelPath="content.name"
             prompt="Add an asset class:"
             selection=assetClassToAdd}}
    </p>
    <hr/>

    <p>
      <input class="button" type="submit" value="Save">
    </p>
  </fieldset>
</form>
